<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>A è‚¡ - Editorial by Champin</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
								<header id="header">
									<a href="index.html" class="logo"><strong>éŸ­èœå«©èŠ½ç­–ç•¥</strong> by Champin</a>
									<ul class="icons">
									</ul>
								</header>

							<!-- Content -->
								<section>
									<header class="main">
										<h1>æˆ‘ä¸æƒ³æˆä¸ºéŸ­èœã€‚</h1>
									</header>

									<span class="image main"><img src="../images/qi/ge_jiucai.jpeg" style="height: 400px;" alt="" /></span>

									<p>æƒ³è¦å…¥å¸‚ï¼Œä½†åˆä¸æƒ³æˆä¸ºéŸ­èœï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
									<p>ä¼—å¤šè‚¡ç¥¨ï¼Œæˆ‘è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ</p>
									<hr class="major" />
									<h2>å£°æ˜</h2>
									<p>ä»¥ä¸‹ä»…ä»£è¡¨ä¸ªäººè§‚ç‚¹ï¼Œ</p>
									<hr class="major" />

									<h2>ä¸€äº›å¤§å®¶éƒ½çŸ¥é“çš„åŸåˆ™</h2>
									<p>å°½é‡æ»¡ä»“è¿ä½œï¼Œæœ€å¤§åŒ–èµ„é‡‘åˆ©ç”¨ç‡</p>
									<p>åˆ†æ•£æŠ•èµ„ï¼Œç¡®å®šè‡ªå·±çš„æŠ•èµ„åˆ†æ•£ç¨‹åº¦ï¼Œä¹Ÿå°±æ˜¯æ¯åªè‚¡ç¥¨çš„ä»“ä½æ¯”ä¾‹</p>
									<p>ä¸¥æ ¼æ­¢æŸï¼Œå¦‚æœä¸ä¼šæ­¢æŸæˆ–è€…ä¸æ„¿æ„æ­¢æŸï¼Œé‚£ä»€ä¹ˆæ ·çš„ç­–ç•¥éƒ½ä¸é€‚åˆä½ </p>
									<p>ä¸¥æ ¼æ­¢ç›ˆï¼Œè½è¢‹ä¸ºå®‰</p>
									<hr class="major" />

									<h2>å®ç°æ–¹æ¡ˆ</h2>
									<p>ä»¥ä¸Šéƒ½æ˜¯äº›è€³ç†Ÿèƒ½è¯¦çš„åŸåˆ™ï¼Œä½†æ˜¯è¯¥è¦æ€ä¹ˆåšåˆ°å‘¢ï¼Œç‰¹åˆ«æ˜¯é€šè¿‡æŠ€æœ¯æ‰‹æ®µåšåˆ°ï¼ˆä¸ç„¶å¾—ç´¯æ­»å§^_^ï¼‰</p>
									<p>é¦–å…ˆä»‹ç»ä¸‹æ•°æ®æºï¼Œæ•°æ®æºæ˜¯ä¸€å®¶åå«BaoStockçš„è¯åˆ¸æ•°æ®å¼€æºå¹³å°ï¼Œè¯¥å¹³å°æä¾›å¤§é‡å‡†ç¡®ã€å®Œæ•´çš„è¯åˆ¸å†å²è¡Œæƒ…æ•°æ®ã€ä¸Šå¸‚å…¬å¸è´¢åŠ¡æ•°æ®ç­‰ï¼Œå¤§å®¶å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥æŸ¥çœ‹</p>
									<p><a href="http://baostock.com/baostock/index.php/%E9%A6%96%E9%A1%B5">BaoStock è¯åˆ¸æ•°æ®å¹³å°</a></p>
									<p>é¦–å…ˆéœ€è¦ç­›é€‰åŸºæœ¬é¢ï¼Œç›´æ¥ä¸Šä»£ç </p>
									<p>åªéœ€è¦ç­›é€‰å‡ºç›ˆåˆ©çš„å³å¯(>0),æ¯•ç«Ÿå¹¶ä¸æ˜¯ç›ˆåˆ©è¶Šå¥½å°±è¶Šæœ‰äººç‚’ï¼Œä½ æ‡‚å¾—ğŸ˜</p>
									<pre><code>
profit_stocks = []
for stock in all_stocks: # éå†è‚¡ç¥¨åˆ—è¡¨ï¼ŒæŸ¥è¯¢ç›ˆåˆ©çš„ä¼ä¸š
	rs_profit = bs.query_profit_data(code=stock['code'], year=year, quarter=quarter)

	while (rs_profit.error_code == '0') & rs_profit.next():
		row_data = map(map_profit_result, rs_profit.get_row_data());
		profitList = list(row_data);
		# è¿”å›æ•°æ®è¯´æ˜
		# å‚æ•°åç§°	å‚æ•°æè¿°	ç®—æ³•è¯´æ˜
		# code	    è¯åˆ¸ä»£ç 
		# pubDate	å…¬å¸å‘å¸ƒè´¢æŠ¥çš„æ—¥æœŸ
		# statDate	è´¢æŠ¥ç»Ÿè®¡çš„å­£åº¦çš„æœ€åä¸€å¤©, æ¯”å¦‚2017-03-31, 2017-06-30
		# roeAvg	å‡€èµ„äº§æ”¶ç›Šç‡(å¹³å‡)(%)	å½’å±æ¯å…¬å¸è‚¡ä¸œå‡€åˆ©æ¶¦/[(æœŸåˆå½’å±æ¯å…¬å¸è‚¡ä¸œçš„æƒç›Š+æœŸæœ«å½’å±æ¯å…¬å¸è‚¡ä¸œçš„æƒç›Š)/2]*100%
		# npMargin	é”€å”®å‡€åˆ©ç‡(%)	å‡€åˆ©æ¶¦/è¥ä¸šæ”¶å…¥*100%
		# gpMargin	é”€å”®æ¯›åˆ©ç‡(%)	æ¯›åˆ©/è¥ä¸šæ”¶å…¥*100%=(è¥ä¸šæ”¶å…¥-è¥ä¸šæˆæœ¬)/è¥ä¸šæ”¶å…¥*100%
		# netProfit	å‡€åˆ©æ¶¦(å…ƒ)
		# epsTTM	æ¯è‚¡æ”¶ç›Š	å½’å±æ¯å…¬å¸è‚¡ä¸œçš„å‡€åˆ©æ¶¦TTM/æœ€æ–°æ€»è‚¡æœ¬
		# MBRevenue	ä¸»è¥è¥ä¸šæ”¶å…¥(å…ƒ)
		# totalShare	æ€»è‚¡æœ¬
		# liqaShare	æµé€šè‚¡æœ¬
		if profitList["npMargin"] > 0 and ... : # ç›ˆåˆ©çš„è¢«åŠ å…¥åˆ°å€™é€‰åˆ—è¡¨
			profit_stocks.append(profitList);
									</code></pre>
									<p>ç„¶åç­›é€‰ä¸è¢«é«˜ä¼°çš„</p>
									<p>ä»·æ ¼æ€»æ˜¯å›´ç»•ç€ä»·å€¼æ³¢åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬åº”å½“é¿å…å»é€‰æ‹©ä¸€äº›è¢«é«˜ä¼°çš„è‚¡ç¥¨ï¼Œæ¯”å¦‚æŒ‡æ ‡å¸‚ç›ˆç‡ä¾¿å¯ä»¥ä½œä¸ºå‚è€ƒ</p>
									<pre><code>
under_estimate_stocks = []
for stock in profit_stocks:
	#### è·å–æ²ªæ·±Aè‚¡ä¼°å€¼æŒ‡æ ‡(æ—¥é¢‘)æ•°æ® ####
	# peTTM    åŠ¨æ€å¸‚ç›ˆç‡ p2è¶Šå°è¶Šå¥½
	# psTTM    å¸‚é”€ç‡ p3 è¶Šå°è¶Šå¥½
	# pcfNcfTTM    å¸‚ç°ç‡ p0è¶Šå°è¶Šå¥åº·ï¼Œé£é™©è¶Šå°
	# pbMRQ    å¸‚å‡€ç‡ p1è¶Šä½è¶Šå¥½,æ³¡æ²«è¶Šå°
	fields= "date,code,open, close, high,low,turn,peTTM,pbMRQ,psTTM,pcfNcfTTM, isST";
	rs = bs.query_history_k_data(stock["code"], fields, start_date=day, end_date=day, frequency="d", adjustflag="3")
	if (rs.error_code == '0') & rs.next():
		row_data = map(map_basics, rs.get_row_data());
		if pbMRQ < 10 and turn > 0.5 and peTTM > 0 and isST=0: # æ ¹æ®è‡ªå·±çš„åå¥½è°ƒæ•´
			under_estimate_stocks.append(list(row_data))
									</code></pre>
									<p>æœ€åæŒ‘å‡ºåˆšè¢«å‰²è¿‡éŸ­èœçš„</p>
									<pre><code>
bud_stocks = []
for stock in under_estimate_stocks:
	#### è·å–æ²ªæ·±Aè‚¡è¿‡å»æ”¶ç›˜æ•°æ® ####
	# close æ”¶ç›˜ä»·
	fields = "date,code,close";
	rs = bs.query_history_k_data(stock['code'],
								 fields,
								 start_date=start_day, end_date=end_day,
								 frequency="d", adjustflag="3")
	month_max = 0;  # æœˆæœ€é«˜ä»·
	month_min = sys.float_info.max;
	month_avg = 0;
	month_begin = 0;  # æœˆåˆä»·
	month_end = 0;
	rate = 0;
	while (rs.error_code == '0') & rs.next():
		row = rs.get_row_data();
		close = float(row[2]);
		if month_begin <= 0:
			month_begin = close;
		month_end = close;
		if close > month_max:
			month_max = close;
		if close < month_min:
			month_min = close;
		if month_avg <= 0:
			month_avg = close;
		month_avg = (month_avg + close) / 2;
	if (month_begin > 0):
		rate = (month_end - month_begin) / month_begin;
	bud_stocks.append([  # æ ¹æ®rateï¼Œä»è·Œçš„æœ€æƒ¨çš„è‚¡ç¥¨å¼€å§‹æ‹©æœºå…¥åœº
		end_day,
		rate,
		month_max,
		month_avg,
		month_min,
		month_end,
		int(time.time())
	])
									</code></pre>
									<p>å½“ç„¶ç»è¿‡ä»¥ä¸Šç­›é€‰è´­å…¥çš„è‚¡ç¥¨ä¾ç„¶ä¼šæœ‰å‘ï¼ˆå…¥å¸‚éœ€è°¨æ…å˜›ï¼‰</p>
									<hr class="major" />

									<h2>æ“ä½œ</h2>
									<p>è‡ªå¾‹ï¼Œè‡ªå¾‹ï¼Œè‡ªå¾‹é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼</p>
									<p></p>

									<hr class="major" />
									<h2>æ€»ç»“</h2>
									<p>å¯ä»¥æ”¾å¿ƒæ»¡ä»“è¿ä½œï¼Œå°†èµ„é‡‘åˆ©ç”¨ç‡æœ€å¤§åŒ–</p>
									<p>åˆ†æ•£æŠ•èµ„ï¼Œä¸ä¼šå› ä¸ºä¸ªåˆ«è‚¡çš„å´©ç›˜å¯¼è‡´åˆ©æ¶¦ä¸ç¨³å®š</p>

								</section>

						</div>
					</div>

				<!-- Sidebar -->
					<div id="sidebar">

					</div>

			</div>

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/browser.min.js"></script>
			<script src="../assets/js/breakpoints.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<script src="../assets/js/main.js"></script>

		<script>
			$(function(){
				jQuery.ajax({
					url: "../menu.html", dataType: "html"
				}).done(function( responseHtml ) {
					$("#sidebar").html(responseHtml);
				});
			});
		</script>
	</body>
</html>